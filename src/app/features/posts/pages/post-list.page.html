<!-- Botão para abrir o modal -->
<button
  (click)="showModal = true"
  class="bg-green-600 text-white px-4 py-2 rounded mb-4 hover:bg-green-700"
>
  Novo Post
</button>

<!-- Campo de busca -->
<input
  type="text"
  [(ngModel)]="searchTerm"
  placeholder="Buscar por título ou conteúdo"
  class="mb-4 p-2 border rounded w-full"
/>

<table class="w-full table-auto border-collapse">
  <thead>
    <tr class="bg-gray-100">
      <th class="p-2 text-left cursor-pointer" (click)="toggleSort('id')">
        ID
        <span *ngIf="sortColumn === 'id'">{{ sortAsc ? '⬆️' : '⬇️' }}</span>
      </th>
      <th class="p-2 text-left cursor-pointer" (click)="toggleSort('title')">
        Título
        <span *ngIf="sortColumn === 'title'">{{ sortAsc ? '⬆️' : '⬇️' }}</span>
      </th>
      <th class="p-2 text-left cursor-pointer" (click)="toggleSort('body')">
        Conteúdo
        <span *ngIf="sortColumn === 'body'">{{ sortAsc ? '⬆️' : '⬇️' }}</span>
      </th>
      <th class="p-2 text-right">Ações</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let post of filteredPosts$ | async" class="border-t">
      <td class="p-2">{{ post.id }}</td>
      <td class="p-2">{{ post.title }}</td>
      <td class="p-2">{{ post.body }}</td>
      <td class="p-2 text-right space-x-2">
        <button (click)="startEdit(post)" class="text-blue-600 hover:underline">
          Editar
        </button>
        <button (click)="startDelete(post)" class="text-red-600 hover:underline">
          Excluir
        </button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Paginação -->
<div class="mt-4 flex justify-between items-center">
  <button
    (click)="currentPage = currentPage - 1"
    [disabled]="currentPage === 1"
    class="px-3 py-1 bg-gray-200 rounded"
  >
    Anterior
  </button>
  <span>Página {{ currentPage }}</span>
  <button
    (click)="currentPage = currentPage + 1"
    class="px-3 py-1 bg-gray-200 rounded"
  >
    Próxima
  </button>
</div>

<!-- Modal de criação -->
<app-modal *ngIf="showModal" title="Novo Post" (close)="showModal = false">
  <app-post-form
    (submitPost)="handleModalSubmit($event)"
    (cancel)="showModal = false"
  ></app-post-form>
</app-modal>
<!-- Modal de edição -->

<app-modal *ngIf="editingPost" title="Editar Post" (close)="editingPost = null">
  <app-post-form
    [post]="editingPost"
    (submitPost)="handleEditSubmit($event)"
    (cancel)="editingPost = null"
  ></app-post-form>
</app-modal>

<!-- Modal de confirmação de exclusão -->
<app-modal
  *ngIf="pendingDelete"
  title="Confirmar Exclusão"
  (close)="pendingDelete = null"
>
  <p class="mb-4">Tem certeza que deseja excluir o post "{{ pendingDelete.id }}"?</p>
  <div class="flex justify-end gap-2">
    <button (click)="pendingDelete = null" class="bg-gray-300 px-4 py-2 rounded">Cancelar</button>
    <button (click)="confirmDelete()" class="bg-red-600 text-white px-4 py-2 rounded">Confirmar</button>
  </div>
</app-modal>

